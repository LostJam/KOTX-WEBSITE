<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>KOTX</title>
    <link rel="stylesheet" href="css/style.css" />
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Work+Sans" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <!-- smooth scrolling script and active -->
    <script>
        $(document).ready(function () {
            function filterPath(string) {
                return string.replace(/^\//, '').replace(/(index|default).[a-zA-Z]{3,4}$/, '').
                    replace(/\/$/, '');
            }
            var locationPath = filterPath(location.pathname);
            var scrollElem = scrollableElement('html', 'body');

            $('a[href*=#]').each(function () {
                var thisPath = filterPath(this.pathname) || locationPath;
                if (locationPath == thisPath &&
                    (location.hostname == this.hostname || !this.hostname) && this.hash.replace(/#/, '')) {
                    var $target = $(this.hash), target = this.hash;
                    if (target) {
                        var targetOffset = $target.offset().top;
                        $(this).click(function (event) {
                            event.preventDefault();
                            let elements = $("nav li a");
                            elements.removeClass("active");
                            $(this).addClass('active');

                            $(scrollElem).animate({ scrollTop: targetOffset }, 400, function () {
                                location.hash = target;
                            });
                        });
                    }
                }
            });
            // use the first element that is "scrollable" 

            function scrollableElement(els) {
                for (var i = 0, argLength = arguments.length; i < argLength; i++) {
                    var el = arguments[i], $scrollElement = $(el);
                    if ($scrollElement.scrollTop() > 0) { return el; }
                    else {
                        $scrollElement.scrollTop(1); var isScrollable = $scrollElement.scrollTop() > 0; $scrollElement.scrollTop(0);
                        if (isScrollable) { return el; }
                    }
                } return [];
            }
        });



    </script>
</head>

<body>
    <header id="header">
        <!-- menu bar home button -->
        <div id="home">
            <a href="#">KOTX</a>
        </div>
        <!-- menu bar of slides -->
        <nav>
            <ul>
                <li>
                    <a href="#slide1" title="Next Section">Covers</a>
                </li>
                <li>
                    <a href="#slide2" title="Next Section">Events</a>
                </li>
                <li>
                    <a href="#slide3" title="Next Section">Contact</a>
                </li>
            </ul>
        </nav>
    </header>
    <!-- slides start -->

    <!-- home page  -->
    <div class="logo-container">
        <img id="klogo" src="img/KOTX-Home.png" />
        <div id="socials-container">
            <a href="https://www.facebook.com/KOTXUCSD/">
                <img class="social-logo" src="img/FB-logo.png" />
            </a>
            <a href="https://www.instagram.com/kotxucsd/">
                <img class="social-logo" src="img/IG-logo.png" />
            </a>
            <a href="https://www.youtube.com/channel/UCgcEhdU3KiKmpR0RKVwOFMg">
                <img class="social-logo" src="img/YT-logo.png" />
            </a>
            <a href="https://www.snapchat.com/add/kotxucsd/">
                <img class="social-logo" src="img/Snap-logo.png" />
            </a>
        </div>
    </div>

    <div id="slide1">
        <!-- Youtube Videos -->
        <!-- TODO: figure out why lullaby doesn't work -->
        <div class="video-media-youtube">
            <ul class="video__container">
                <li class="video__content">
                    <h2>Dance Covers</h2>
                    <br>
                    <ul class="video-media-youtube-inner">
                        <li class="media__embed">

                            <div class="video-media-youtube-inner-vi video-media-youtube-inner-vi--ratio">
                                <iframe class="latestVideoEmbed" vnum="0" cid="UCgcEhdU3KiKmpR0RKVwOFMg" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>
                            </div>
                        </li>

                        <li class="media__embed">

                            <div class="video-media-youtube-inner-vi video-media-youtube-inner-vi--ratio">
                                <iframe class="latestVideoEmbed" vnum="1" cid="UCgcEhdU3KiKmpR0RKVwOFMg" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>
                            </div>
                        </li>
                    </ul>
                </li>

                <li class="video__content">

                    <ul class="video-media-youtube-inner">
                        <li class="media__embed">

                            <div class="video-media-youtube-inner-vi video-media-youtube-inner-vi--ratio">
                                <iframe class="latestVideoEmbed" vnum="2" cid="UCgcEhdU3KiKmpR0RKVwOFMg" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>
                            </div>
                        </li>

                        <li class="media__embed">

                            <div class="video-media-youtube-inner-vi video-media-youtube-inner-vi--ratio">
                                <iframe class="latestVideoEmbed" vnum="3" cid="UCgcEhdU3KiKmpR0RKVwOFMg" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>
                                </iframe>
                            </div>
                        </li>
                    </ul>
                </li>

                <li class="video__content">

                    <ul class="video-media-youtube-inner">
                        <li class="media__embed">

                            <div class="video-media-youtube-inner-vi video-media-youtube-inner-vi--ratio">
                                <iframe class="latestVideoEmbed" vnum="4" cid="UCgcEhdU3KiKmpR0RKVwOFMg" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>
                            </div>
                        </li>

                        <li class="media__embed">

                            <div class="video-media-youtube-inner-vi video-media-youtube-inner-vi--ratio">
                                <iframe class="latestVideoEmbed" vnum="5" cid="UCgcEhdU3KiKmpR0RKVwOFMg" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>
                            </div>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <!--Youtube Video Next Most Recent Script -->
        <script>
            let reqURL = "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent("https://www.youtube.com/feeds/videos.xml?channel_id=");
            function loadVideo(iframe) {
                $.getJSON(reqURL + iframe.getAttribute('cid'),
                    function (data) {
                        let videoNumber = (iframe.getAttribute('vnum') ? Number(iframe.getAttribute('vnum')) : 0);
                        let link = data.items[videoNumber].link;
                        id = link.substr(link.indexOf("=") + 1);
                        iframe.setAttribute("src", "https://youtube.com/embed/" + id + "?controls=0&autoplay=0");
                    }
                );
            }
            let iframes = document.getElementsByClassName('latestVideoEmbed');
            for (let i = 0, len = iframes.length; i < len; i++) {
                loadVideo(iframes[i]);
            }
        </script>

    </div>

    <!-- about section -->
    <div id="slide2">
        <div class="content">

            <h2>Events</h2>

            <h3>Events here</h3>


        </div>
    </div>

    <!-- contact us section -->
    <div id="slide3">
        <div class="content">

            <h2>Contact Us</h2>
            <h3> email us at kotx.ucsd.edu </h3>

        </div>
    </div>

    <!-- footer -->
    <div id="footer">
        <div class="footer-column">

            <p>Contact Us</p>
            <p> email us at kotx.ucsd.edu </p>

        </div>
        <div class="footer-column">

            <p>Sponsors</p>
            <p> <a href="https://www.studypool.com/studyGuides">Literature Study Guides</a> at Studypool</p>

        </div>
    </div>
    </div>
    <!-- SLIDES END -->
</body>

</html>